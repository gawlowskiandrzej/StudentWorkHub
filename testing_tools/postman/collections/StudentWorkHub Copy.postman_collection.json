{
  "info": {
    "_postman_id": "83ed3200-ca17-4081-b464-e7e99a85d00c",
    "name": "StudentWorkHub",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "get_scrapped_offers",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "68e5638f-6faf-406e-838f-e95afc605bb0",
            "exec": [
              "// Visualization Script",
              "// Visualization Script",
              "const template = `",
              "<table border=\"1\" cellpadding=\"5\" cellspacing=\"0\" style=\"border-collapse:collapse;width:100%;background:white;\">",
              "  <thead>",
              "    <tr>",
              "      <th>#</th>",
              "      <th>Source</th>",
              "      <th>ID</th>",
              "      <th>JobName</th>",
              "    </tr>",
              "  </thead>",
              "  <tbody>",
              "    {{#each offers}}",
              "      <tr>",
              "        <td>{{@index}}</td>",
              "        <td>{{source}}</td>",
              "        <td>{{id}}</td>",
              "        <td>{{jobTitle}}</td>",
              "        <td>{{url}}</td>",
              "      </tr>",
              "    {{/each}}",
              "  </tbody>",
              "</table>",
              "`;",
              "",
              "function createPayload() {",
              "    let raw = pm.response.json();",
              "    let batch = raw.batch || [];",
              "    let offers = batch.map(item => {",
              "        try {",
              "            return JSON.parse(item);",
              "        } catch (e) {",
              "            return null;",
              "        }",
              "    }).filter(Boolean);",
              "    return { offers };",
              "}",
              "",
              "pm.visualizer.set(template, createPayload());"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "ea90ef33-55d3-4d3b-9070-c5e76a48c11d",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "37109013-5819-404d-9f35-1cd6e9aac306",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"jobIds\": \r\n    [\r\n        \"8af23902-639a-4460-ae96-1114911173e7\",\r\n        \"6cbacb00-a733-454e-9736-07cf355d4eff\",\r\n        \"157985ad-c4b9-4ad8-9c70-dd1a59e46495\",\r\n        \"5d187589-bc4b-45c7-bb4e-a8d8e06e0892\"\r\n    ]\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseURL}}/api/offers/getOffersScrapped?usedAi=false&addToDatabase=false",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "api",
            "offers",
            "getOffersScrapped"
          ],
          "query": [
            {
              "key": "usedAi",
              "value": "false",
              "uuid": "121e3222-240d-4b2e-a50b-df36a1b48b33"
            },
            {
              "key": "addToDatabase",
              "value": "false",
              "uuid": "c87f778b-ae67-4b98-b60a-ffacfc31b585"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "create_scrapped_offers_request",
      "id": "218ea751-c7d4-4cef-b7f5-e6f30fa8e512",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseURL}}/api/offers?batchSize=30",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "api",
            "offers"
          ],
          "query": [
            {
              "key": "batchSize",
              "value": "30"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "get_offers_fromdatabase",
      "id": "f024ca40-3125-4383-a602-eda230727740",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "GET",
        "header": [
          {
            "key": "Bearer",
            "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXAiOiJBdXRoZW50aWNhdGlvblRva2VuIiwiYXJuIjoiMjAyNTExMjgtQVUtMzlGNEU0ODAwMC0yNEU0RjJDQUQ0LTBCIiwiZXhwIjoxNzY0MzUxNDcxLCJpYXQiOjE3NjQzNDg3NzEsImlzcyI6ImtzZWYtYXBpLXRlIiwiYXVkIjoia3NlZi1hcGktdGUifQ.J0BPh-MH0uWBuDsXyJffUIp6U4WUpUJRFxxJvhr1bMQ",
            "type": "text",
            "disabled": true
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseURL}}/api/offers/getOffersDatabase",
          "host": [
            "{{baseURL}}"
          ],
          "path": [
            "api",
            "offers",
            "getOffersDatabase"
          ]
        }
      },
      "response": []
    },
    {
      "name": "get_search_dictionaries",
      "id": "f4fac1ae-1481-49ef-a7ba-a31bb1762c5b",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": ""
        }
      },
      "response": []
    }
  ],
  "variable": [
    {
      "id": "1a798878-e76a-4ba3-8e4b-ef8f306b8c69",
      "key": "baseURL",
      "value": "",
      "type": "default"
    }
  ]
}